{
  "version": 3,
  "sources": ["../../node_modules/esbuild-plugin-ghpages-pwa/src/pwa.js", "../../javascripts/audio.js", "../../javascripts/shake.js", "../../javascripts/index.js"],
  "sourcesContent": ["// this script will be injected in production environments\n\nconst pwa = () => {\n  if ('serviceWorker' in navigator) {\n    let scope = window.location.pathname\n    navigator.serviceWorker.register(`${scope}service.js`, { scope }).then((registration) => {\n      const refreshPage = (worker) => {\n        if (worker.state != 'activated') {\n          worker.postMessage({action: 'skipWaiting'});\n        }\n        window.location.reload();\n      }\n      if (registration.waiting) {\n        refreshPage(registration.waiting);\n      }\n      registration.addEventListener('updatefound', () => {\n        let newWorker = registration.installing;\n        newWorker.addEventListener('statechange', () => {\n          if (newWorker.state === 'installed') {\n            refreshPage(newWorker);\n          }\n        });\n      });\n    });\n  }\n}\n\npwa();\n", "const frequencies = [\n  [1336, 941],\n  [1209, 697],\n  [1336, 697],\n  [1447, 697],\n  [1209, 770],\n  [1336, 770],\n  [1447, 770],\n  [1209, 852],\n  [1336, 852],\n  [1447, 852]\n]\n\nconst duration = 0.2\n\nexport const beep = async (i) => {\n  let audioContext = new AudioContext();\n  let destination = audioContext.destination\n  let gainNode = audioContext.createGain();\n  gainNode.gain.value = 0.1;\n  let [high, low] = frequencies[i]\n  let highOscillator = new OscillatorNode(audioContext, {\n    type: 'sine',\n    frequency: high\n  })\n  highOscillator.connect(gainNode).connect(destination);\n  highOscillator.start(0)\n  highOscillator.stop(duration)\n  let lowOscillator = new OscillatorNode(audioContext, {\n    type: 'sine',\n    frequency: low\n  })\n  lowOscillator.connect(gainNode).connect(destination);\n  lowOscillator.start(0)\n  lowOscillator.stop(duration)\n  setTimeout(() => {\n    audioContext.close()\n  }, 1500)\n}\n\nexport const boop = async (a,b) => {\n  let audioContext = new AudioContext();\n  let destination = audioContext.destination\n  let gainNode = audioContext.createGain();\n  gainNode.gain.value = 0.1;\n  let oscillator = new OscillatorNode(audioContext, {\n    type: 'square',\n    frequency: a\n  })\n  oscillator.connect(gainNode).connect(destination);\n  oscillator.start(0)\n  oscillator.frequency.setValueAtTime(b, duration)\n  oscillator.set\n  oscillator.stop(duration * 2)\n}\n", "const matrixTransformString = (m) => {\n  return `matrix(${m.a},${m.b},${m.c},${m.d},${m.e},${m.f})`\n}\n\n// prefers-reduced-motion\nlet motionQuery = self.matchMedia?.('(prefers-reduced-motion)')\nlet reduceMotion = true\nif (motionQuery != null) {\n  const handleReduceMotionChanged = function(e) {\n    reduceMotion = motionQuery.matches;\n  }\n  motionQuery.addEventListener('change', handleReduceMotionChanged)\n  handleReduceMotionChanged()\n}\n\nexport const shake = (element) => {\n  if (reduceMotion) {\n    return { finished: Promise.resolve() }\n  } else {\n    let m1 = (new DOMMatrix()).translate(-5, 0)\n    let m2 = (new DOMMatrix()).translate(0, 0)\n    let m3 = (new DOMMatrix()).translate(5, 0)\n    let keyFrames = [\n      { transform: matrixTransformString(m1) },\n      { transform: matrixTransformString(m3) },\n      { transform: matrixTransformString(m1) },\n      { transform: matrixTransformString(m2) },\n      { transform: matrixTransformString(m1) }\n    ]\n    let options = {\n      easing: 'ease-in-out', duration: 200, iterations: 2\n    }\n    return element.animate(keyFrames, options)\n  }\n}\n\n// https://gist.github.com/ddgromit/859699?permalink_comment_id=783800#gistcomment-783800\nconst shuffle = (a) => {\n  let i = a.length\n  while (--i > 0) {\n    let j = ~~(Math.random() * (i + 1))\n    let t = a[j]\n    a[j] = a[i]\n    a[i] = t\n  }\n  return a\n}\n\nexport const bounce = (elements) => {\n  let delay = 0\n  for (let element of shuffle(elements)) {\n    let y = Math.max(8, Math.floor(Math.random() * 15))\n    element.animate([\n      { transform: 'translateY(0px)' },\n      { transform: `translateY(-${y}px)` },\n      { transform: 'translateY(0px)' }\n    ], { duration: 400, easing: 'ease-in-out', delay: delay * 1000})\n    delay += 0.025\n  }\n}\n", "import { beep, boop } from './audio.js'\nimport { shake, bounce } from './shake.js'\n\nlet mute = true\nlet sequence = []\nlet answer\ntry {\n  answer = localStorage.getItem('answer')\n} catch (err) {\n  console.error(err)\n}\n\nconst clearSequence = () => {\n  sequence.length = 0\n  document.querySelector('output').value = sequence.join('')\n}\n\nconst success = () => {\n  let buttons = Array.from(document.querySelectorAll('.grid button:not([id])'))\n  bounce(buttons)\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // set answer\n  document.querySelector('form input').value = answer\n  let output = document.querySelector('output')\n\n  const appendNumber = (number) => {\n    if (sequence.push(number) <= answer?.length) {\n      if (!mute) {\n        beep(number)\n      }\n      output.value = sequence.join('')\n    } else {\n      shake(output).finished.then(clearSequence)\n    }\n  }\n\n  const submit = async (e) => {\n    if (sequence.join('') === answer) {\n      // if (!mute) {\n        boop(400,800)\n        success()\n      // }\n    } else {\n      // if (!mute) {\n        boop(100,50)\n      // }\n      await shake(output).finished\n    }\n    clearSequence()\n  }\n\n  // document.addEventListener('keypress', (e) => {\n  //   let key = Number(e.key)\n  //   if (!isNaN(key) && (key <= 9) && (key >= 0)) {\n  //     appendNumber(key)\n  //   } else if (e.key === 'Enter') {\n  //     submit()\n  //   }\n  // })\n\n  for (let button of document.querySelectorAll('button[value]')) {\n    button.addEventListener('click', (e) => {\n      let number = Number(e.currentTarget.value)\n      appendNumber(number)\n    })\n  }\n  document.querySelector('#clear').addEventListener('click', clearSequence)\n  document.querySelector('#enter').addEventListener('click', submit)\n  document.querySelector('#number').addEventListener('click', () => {\n    document.querySelector('dialog').showModal()\n  })\n  document.querySelector('dialog').addEventListener('close', (e) => {\n    let value = e.currentTarget.querySelector('form input').value\n    if (value?.length > 0) {\n      answer = value\n      try {\n        localStorage.setItem('answer', answer)\n      } catch (err) {\n        console.error(err)\n      }\n    }\n  })\n  document.querySelector('#obscure').addEventListener('click', (e) => {\n    output.classList.toggle('obscure', e.currentTarget.checked)\n  })\n  document.querySelector('#mute').addEventListener('click', (e) => {\n    mute = e.currentTarget.checked\n  })\n})\n"],
  "mappings": "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",
  "names": []
}
